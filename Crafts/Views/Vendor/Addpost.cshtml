@model List<BL.SharedModels.ProductModel>
@{
    Layout = "~/Views/Shared/_Profile.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Addpost</title>

    <link href="~/Assests/css/bootstrap.css" rel="stylesheet" />
    <script src="~/Assests/js/jquery-3.2.1.min.js"></script>
    <script src="~/Assests/js/popper.js"></script>
    <script src="~/Assests/js/bootstrap.min.js"></script>
    <script src="~/Assests/js/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <style>
        .dropbtn {
            background-color: #4CAF50;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
        }

            .dropdown-content a {
                color: black;
                padding: 12px 16px;
                text-decoration: none;
                display: block;
            }

                .dropdown-content a:hover {
                    background-color: #ddd;
                }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown:hover .dropbtn {
            background-color: #3e8e41;
        }

        .image-upload > input {
            display: none;
        }

        .image-upload img {
            width: 80px;
            cursor: pointer;
        }


    </style>
</head>
<body>






    <div> 
        <div >
           
            <div  style="padding-left:150px">
                    <input id="city" style="margin:40px;text-align:center" type="text" class="form-control"  placeholder="Add new product">
            </div>
        </div>
             <h2>Aproved Products</h2>
        <br />
          @foreach (var i in Model)
          {
            <div>
                @{ var getimage = Convert.ToBase64String(i.Image);
                    var picture = string.Format("data:image/jpeg;base64,{0}", getimage);
                }
            </div>
                 <div class="col-lg-12 row rounded mx-auto d-block" style=" margin-bottom:25px ;min-height:300px">
                     <img src="@Url.Content(picture)" class="img-fluid img-thumbnail  rounded float-right" style="width:200px ; height:200px" />
                     <div class="col-lg-12 " style="padding-top:35px ">
                         <div class="col-12"> <span style="font-weight:bold">Catigory Name :</span> @i.Catigory_name </div>
                         <div class="col-12"> <span style="font-weight:bold">Product Name :</span> @i.Product_Name</div>
                         <div class="col-12"><span style="font-weight:bold">Product Description :</span> @i.Product_Description</div>
                         <div class="col-12"> <span style="font-weight:bold">Product Price :</span> @i.Product_Price</div>
                     </div>
                  
                 </div>
                 
                    }
         <br /> <hr />
        <h2> Pending Products </h2>
        <br />
        @foreach (var i in ViewBag.Pendingproduct)
        {
            <div>
                @{ var getimage = Convert.ToBase64String(i.Image);
                    var picture = string.Format("data:image/jpeg;base64,{0}", getimage);
                }
            </div>
            <div class="col-lg-12 row rounded mx-auto d-block" style=" margin-bottom:25px ;min-height:300px">
                <img src="@Url.Content(picture)" class="img-fluid img-thumbnail  rounded float-right" style="width:200px ; height:200px" />
                <div class="col-lg-12 " style="padding-top:35px ">
                    <div class="col-12"> <span style="font-weight:bold">Catigory Name :</span> @i.Catigory_name </div>
                    <div class="col-12"> <span style="font-weight:bold">Product Name :</span> @i.Product_Name</div>
                    <div class="col-12"><span style="font-weight:bold">Product Description :</span> @i.Product_Description</div>
                    <div class="col-12"> <span style="font-weight:bold">Product Price :</span> @i.Product_Price</div>
                </div>

            </div>

           }
        <br /><hr />
        <h2> Rejected Products</h2>
        <br />
        @foreach (var i in ViewBag.Rejectedproduct)
        {
            <div>
                @{ var getimage = Convert.ToBase64String(i.Image);
                    var picture = string.Format("data:image/jpeg;base64,{0}", getimage);
                }
            </div>
            <div class="col-lg-12 row rounded mx-auto d-block" style=" margin-bottom:25px ;min-height:300px">
                <img src="@Url.Content(picture)" class="img-fluid img-thumbnail  rounded float-right" style="width:200px ; height:200px" />
                <div class="col-lg-12 " style="padding-top:35px ">
                    <div class="col-12"> <span style="font-weight:bold">Catigory Name :</span> @i.Catigory_name </div>
                    <div class="col-12"> <span style="font-weight:bold">Product Name :</span> @i.Product_Name</div>
                    <div class="col-12"><span style="font-weight:bold">Product Description :</span> @i.Product_Description</div>
                    <div class="col-12"> <span style="font-weight:bold">Product Price :</span> @i.Product_Price</div>
                </div>

            </div>
                    }


    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">New product</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    
                </div>
                <div class="modal-body">
                    <form id="post-form" action="/Vendor/AddProduct" method="post" enctype="multipart/form-data">
                        <div class="image-upload">
                            <label for="file-input">
                                <img src="~/Assests/img/upload.png" />
                            </label>
                            
                           
                            @Html.ValidationMessage("insertedimg", "", new { @class = "text-danger" })
                            <input id="file-input" type="file" name="insertedimg"  required/>
                        </div>
                        <br />
                   
                        @Html.ValidationMessage("Product_Description", "", new { @class = "text-danger" })
                        <input type="text" id="Product_Description " name="Product_Description" placeholder="description" class="form-control col-12" required />
                        <br />
                       
                        @Html.ValidationMessage("Product_Price", "", new { @class = "text-danger" })
                        <input type="number" id="Product_Price " name="Product_Price" placeholder="price" class="form-control col-12" />
                        <br />
                        
                        @Html.ValidationMessage("Product_Name", "", new { @class = "text-danger" })
                        <input type="text" id="Product_Name" name="Product_Name" placeholder="product Name" class="form-control col-12" required/>
                        <br />
                       
                        @Html.ValidationMessage("cat_name", "", new { @class = "text-danger" })
                          <select id="cat" class="dropdown dropdown-menu  col-12 form-control"name="cat_name" size="4" required >
                              <option class="dropdown-item" selected> Choose Catigory</option>
                               @foreach (var item in ViewBag.cat)
                               {
                                   <option class="dropdown-item">
                                       @item.Cat_Name 
                                   </option>
                               }
                          </select>
                        <br /><br />
                        <button type="submit"id="submit"   style="float:right" class="btn btn-outline-primary form-control">Post</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

  <script>
      myform = document.getElementById("post-form");
      Console.log(myform);
  </script>
   
    <script>
        $('#city').focus(function () {
            //open bootsrap modal
            $('#myModal').modal({
                show: true
            });
        });

        $('#submit').click(function () {
            
            input = $('#post-form');
            for (i = 0; i < input.length; i++) {
                cities.push(input[i].value);
            }

            //if (cities.length === 0) {
            //    $('.error').text('please select a city...stupid');
            //} else {
            //    $('.error').text('');
            //    var data = JSON.stringify(cities);
            //    console.log(data);
            //}
        });
    </script>
    <script>
        preview(files)
        {
            if (files.length === 0)
                return;

            var mimeType = files[0].type;
            if (mimeType.match(/image\/*/) == null) {
                this.message = "Only images are supported.";
                return;
            }
            var reader = new FileReader();
            this.imagePath = files;
            reader.readAsDataURL(files[0]);
            reader.onload = (_event) => {
                this.imgURL = reader.result;
                this.displayinput = true;
            }
        }
        
    </script>
    <script>
        var newpost = document.getElementById("post-form");
        console.log(newpost.profilepic.value);
        var newdiv = document.getElementById("new-div");
        var postimg = document.createElement("img");
        postimg.setAttribute("src", newpost.profilepic.value);
        var postdescription = document.createElement("p");
        postdescription.innerText = newpost.description.value;
    </script>
    <script>
        document.getElementById("openinsertedimg").click(function () {
            document.getElementById("input").click();
        })
    </script>
</body>
</html>

